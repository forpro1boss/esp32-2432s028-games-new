# Snake game for ESP32 + TPM408 2.8" (ILI9341)

Это минимальный пример "Змейки" для ESP32 и 2.8" TFT (предполагается драйвер ILI9341). Проект настроен для сборки через PlatformIO.

Файлы:
- `platformio.ini` - конфигурация PlatformIO
- `src/main.cpp` - исходник игры
- `lib/TFT_eSPI/User_Setup.h` - настройки библиотеки TFT_eSPI (пины/драйвер)

Сборка и получение `.bin`:
1. Установите PlatformIO (VS Code + PlatformIO IDE или CLI).
2. В корне проекта выполните:

```bash
pio run -e esp32-2432s028
```

3. Скомпилированный `.bin` будет в:

```
.pio/build/esp32-2432s028/firmware.bin
```

Заметки по настройке дисплея и пинов:
- По умолчанию `lib/TFT_eSPI/User_Setup.h` настроен на ILI9341. Если ваш дисплей использует другой контроллер (например, ST7789), замените соответствующий `#define`.
- Пины SPI и управления (`TFT_MOSI`, `TFT_SCLK`, `TFT_CS`, `TFT_DC`, `TFT_RST`, `TFT_BL`) указаны в `User_Setup.h`. Измените их под свою плату.

Управление:
- В текущем примере управление выполнено через сенсорный экран (XPT2046). Если у вас резистивный сенсор, подключённый к SPI, проверьте пин `TOUCH_CS` в `lib/TFT_eSPI/User_Setup.h` (по умолчанию `33` для вашей платы).
	Я также добавил встроенную калибровку: при первом запуске прошивки появится экран калибровки (коснитесь крестика в 4 углах), значения сохранятся в NVS и будут загружаться автоматически.
- Если вы хотите использовать физические кнопки вместо сенсора, скажите — я верну обработку кнопок и укажу рекомендованные пины.

Если ваш дисплей действительно TPM408-2.8 и он использует другой драйвер или сенсор, пришлите модель/даташит — я подстрою конфигурацию и код.

## GitHub Actions: собрать `.bin` в облаке (подходит для Chromebook)

Если вы не можете установить PlatformIO локально (например, на школьном Chromebook), можно воспользоваться встроённой CI-сборкой через GitHub Actions. В репозиторий добавлен workflow, который собирает прошивку и загружает `firmware.bin` как артефакт.

Как получить `.bin` через GitHub Actions:
1. Запушьте изменения в этот репозиторий (ветка `main`).
2. Откройте вкладку `Actions` на GitHub и выберите `Build firmware (PlatformIO)`.
3. Запустите workflow вручную (`Run workflow`) или дождитесь автоматического запуска при пуше.
4. После выполнения перейдите в run -> `Artifacts` -> скачайте `firmware-bin`.

Также возможны альтернативы:
- Включить Linux (Crostini) на Chromebook и установить PlatformIO CLI (`pip install platformio`) и собрать локально.
- Использовать PlatformIO Remote/Cloud (если у вас есть аккаунт).

Пример команд для локальной сборки (Crostini / Linux):

```bash
# установить platformio
python3 -m pip install --user platformio
# перейти в корень проекта и собрать
pio run -e esp32-2432s028
```

# esp32-2432s028-games-new